"use strict";(self.webpackChunkangular_registration_login_example=self.webpackChunkangular_registration_login_example||[]).push([[169],{7169:(z,g,i)=>{i.r(g),i.d(g,{AccountModule:()=>V});var s=i(4006),l=i(6895),a=i(5800),e=i(4650),c=i(4491);let _=(()=>{class t{constructor(o,n){this.router=o,this.accountService=n,this.accountService.userValue&&this.router.navigate(["/"])}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(a.F0),e.Y36(c.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:0,consts:[[1,"col-12","mt-5"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[a.lC],encapsulation:2}),t})();var v=i(590),w=i(7110);function h(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"E-mail is required"),e.qZA())}function C(t,r){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,h,2,0,"div",13),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.email.errors.required)}}function Z(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function b(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 8 characters"),e.qZA())}function x(t,r){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,Z,2,0,"div",13),e.YNc(2,b,2,0,"div",13),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.oldPassword.errors.required),e.xp6(1),e.Q6J("ngIf",o.f.oldPassword.errors.minlength)}}function P(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function T(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 8 characters"),e.qZA())}function q(t,r){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,P,2,0,"div",13),e.YNc(2,T,2,0,"div",13),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.newPassword.errors.required),e.xp6(1),e.Q6J("ngIf",o.f.newPassword.errors.minlength)}}function A(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function I(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 8 characters"),e.qZA())}function J(t,r){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,A,2,0,"div",13),e.YNc(2,I,2,0,"div",13),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.repeatedNewPassword.errors.required),e.xp6(1),e.Q6J("ngIf",o.f.repeatedNewPassword.errors.minlength)}}function Y(t,r){1&t&&e._UZ(0,"span",14)}const m=function(t){return{"is-invalid":t}};let p=(()=>{class t{constructor(o,n,d,u){this.formBuilder=o,this.router=n,this.accountService=d,this.alertService=u,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[s.kI.required]],oldPassword:["",[s.kI.required,s.kI.minLength(8)]],newPassword:["",[s.kI.required,s.kI.minLength(8)]],repeatedNewPassword:["",[s.kI.required,s.kI.minLength(8)]]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.resetPassword(this.form.value).subscribe({next:()=>{localStorage.setItem("pwdChanged","true"),this.alertService.success("Registration successful",{keepAfterRouteChange:!0}),this.router.navigate(["/"])},error:o=>{localStorage.setItem("pwdChanged","false"),this.alertService.error(o?.message),this.loading=!1}}))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(a.F0),e.Y36(c.B),e.Y36(c.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],decls:27,vars:19,consts:[[1,"container-fluid"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","oldPassword",1,"form-control",3,"ngClass"],["type","password","formControlName","newPassword",1,"form-control",3,"ngClass"],["type","password","formControlName","repeatedNewPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"div",3)(4,"label",4),e._uU(5,"E-mail"),e.qZA(),e._UZ(6,"input",5),e.YNc(7,C,2,1,"div",6),e.qZA(),e.TgZ(8,"div",3)(9,"label",4),e._uU(10,"Current Password"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,x,3,2,"div",6),e.qZA(),e.TgZ(13,"div",3)(14,"label",4),e._uU(15," New Password"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,q,3,2,"div",6),e.qZA(),e.TgZ(18,"div",3)(19,"label",4),e._uU(20,"Confirm Password"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,J,3,2,"div",6),e.qZA(),e.TgZ(23,"div")(24,"button",10),e.YNc(25,Y,1,0,"span",11),e._uU(26," Change Password "),e.qZA()()()()()),2&o&&(e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("ngClass",e.VKq(11,m,n.submitted&&n.f.email.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.email.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(13,m,n.submitted&&n.f.oldPassword.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.oldPassword.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(15,m,n.submitted&&n.f.newPassword.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.newPassword.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(17,m,n.submitted&&n.f.repeatedNewPassword.errors)),e.xp6(1),e.Q6J("ngIf",n.submitted&&n.f.repeatedNewPassword.errors),e.xp6(2),e.Q6J("disabled",n.loading||n.form.invalid),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[l.mk,l.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:["img.animated[_ngcontent-%COMP%]{animation:mover 2s infinite alternate;max-width:231%;height:auto;margin:9rem 0rem 0px}.logo[_ngcontent-%COMP%]{width:13%}.info[_ngcontent-%COMP%]{background-color:#d2a47336;color:#092d53;padding:1px 31px;font-size:21px}@keyframes mover{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.container-fluid[_ngcontent-%COMP%]{display:grid}.card-header[_ngcontent-%COMP%]{text-align:center}.card-body[_ngcontent-%COMP%]{margin:5rem -14rem 0px}.login-btn[_ngcontent-%COMP%]{width:78%;background-color:#201153;color:#fff;margin:20px 4rem}"]}),t})();function y(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function N(t,r){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,y,2,0,"div",7),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.f.login.errors.required)}}function U(t,r){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function Q(t,r){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,U,2,0,"div",7),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.f.password.errors.required)}}function R(t,r){1&t&&e._UZ(0,"span",21)}const f=function(t){return{"is-invalid":t}};function S(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",11)(1,"form",12),e.NdJ("ngSubmit",function(){e.CHM(o);const d=e.oxw();return e.KtG(d.onSubmit())}),e.TgZ(2,"div",13)(3,"label",14),e._uU(4,"Email"),e.qZA(),e._UZ(5,"input",15),e.YNc(6,N,2,1,"div",16),e.qZA(),e.TgZ(7,"div",13)(8,"label",14),e._uU(9,"Password"),e.qZA(),e._UZ(10,"input",17),e.YNc(11,Q,2,1,"div",16),e.qZA(),e.TgZ(12,"div")(13,"button",18),e.YNc(14,R,1,0,"span",19),e._uU(15," Login "),e.qZA()()()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("ngClass",e.VKq(7,f,o.submitted&&o.f.login.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.login.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(9,f,o.submitted&&o.f.password.errors)),e.xp6(1),e.Q6J("ngIf",o.submitted&&o.f.password.errors),e.xp6(2),e.Q6J("disabled",o.loading||o.form.invalid),e.xp6(1),e.Q6J("ngIf",o.loading)}}function L(t,r){if(1&t&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Oqu(o.error)}}function M(t,r){1&t&&e._UZ(0,"app-reset-password")}let O=(()=>{class t{constructor(o,n,d,u){this.formBuilder=o,this.route=n,this.router=d,this.accountService=u,this.loading=!1,this.submitted=!1,this.showReset=!1,this.accountService.userValue&&this.router.navigate(["/"])}ngOnInit(){this.form=this.formBuilder.group({login:["",s.kI.required],password:["",s.kI.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.error="",this.loading=!0,this.accountService.login(this.f.login.value,this.f.password.value).pipe((0,v.P)()).subscribe({next:o=>{o?.result?.user?.admin?.shouldRedirectToResetPasswordPage?(localStorage.setItem("pwdChanged","false"),this.showReset=!0):(localStorage.setItem("pwdChanged","true"),this.router.navigateByUrl("/"))},error:o=>{this.error=o?.error?.message||o?.message,this.loading=!1}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(a.gz),e.Y36(a.F0),e.Y36(w.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"container-fluid"],[1,"mt-3"],["src","../../assets/img/twsel.svg",1,"logo"],[1,"row"],[1,"col-sm-7","d-flex","justify-content-center"],["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"col-sm-5"],["data-aos","zoom-out","data-aos-delay","300",1,"col-lg-4","order-1","order-lg-2","hero-img"],["src","../../assets/img/about.png","alt","",1,"img-fluid","animated"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","email","formControlName","login",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","login-btn",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"alert","alert-danger"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"header",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4),e.YNc(5,S,16,11,"div",5),e.YNc(6,L,2,1,"div",6),e.YNc(7,M,1,0,"app-reset-password",7),e.qZA(),e.TgZ(8,"div",8)(9,"div",9),e._UZ(10,"img",10),e.qZA()()()()),2&o&&(e.xp6(5),e.Q6J("ngIf",!n.showReset),e.xp6(1),e.Q6J("ngIf",n.error&&!n.showReset),e.xp6(1),e.Q6J("ngIf",n.showReset))},dependencies:[l.mk,l.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p],styles:["img.animated[_ngcontent-%COMP%]{animation:mover 2s infinite alternate;max-width:231%;height:auto;margin:9rem 0rem 0px}.logo[_ngcontent-%COMP%]{width:13%}.info[_ngcontent-%COMP%]{background-color:#d2a47336;color:#092d53;padding:1px 31px;font-size:21px}@keyframes mover{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.container-fluid[_ngcontent-%COMP%]{display:grid}.card-header[_ngcontent-%COMP%]{text-align:center}.card-body[_ngcontent-%COMP%]{margin:7rem 7rem 0px}.login-btn[_ngcontent-%COMP%]{width:78%;background-color:#201153;color:#fff;margin:20px 4rem}"]}),t})();var k=i(3588);const B=[{path:"",component:_,children:[{path:"login",component:O},{path:"change-password",component:p,canActivate:[k.a1]}]}];let F=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.Bz.forChild(B),a.Bz]}),t})(),V=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[c.B],imports:[l.ez,s.UX,F]}),t})()}}]);